Product Mock Application

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ-–∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è CRUD-–æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞–¥ —Å—É—â–Ω–æ—Å—Ç—å—é Product, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ –Ω–∞ Spring Boot.
–°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å –¥–≤—É–º—è –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º ‚Äî JPA –∏ JDBC, –∞ —Ç–∞–∫–∂–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –≤ Prometheus –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

‚∏ª

‚öôÔ∏è –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
‚Ä¢	REST-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è CRUD-–æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞–¥ —Å—É—â–Ω–æ—Å—Ç—å—é Product
‚Ä¢	POST /api/products ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞
‚Ä¢	GET /api/products/{id} ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞ –ø–æ ID
‚Ä¢	PUT /api/products/{id} ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
‚Ä¢	DELETE /api/products/{id} ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
‚Ä¢	–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–≤—É—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º:
‚Ä¢	JPA (Hibernate) ‚Äî –æ–±—ä–µ–∫—Ç–Ω–æ-—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
‚Ä¢	JDBC (JdbcTemplate) ‚Äî –ø—Ä—è–º–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å SQL
‚Ä¢	–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (seed) –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
‚Ä¢	–ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ application.yml
‚Ä¢	–≠–∫—Å–ø–æ—Ä—Ç –º–µ—Ç—Ä–∏–∫ —á–µ—Ä–µ–∑ /actuator/prometheus
‚Ä¢	–ü–æ–¥–¥–µ—Ä–∂–∫–∞ Docker –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Prometheus + Grafana

‚∏ª

üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç —á–∏—Å—Ç—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ —Å–ª–æ–∏:

adapter/         ‚Äî –∞–¥–∞–ø—Ç–µ—Ä—ã JPA –∏ JDBC
config/          ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è seed-–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ —Å–≤–æ–π—Å—Ç–≤
controller/      ‚Äî REST-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
model/           ‚Äî –¥–æ–º–µ–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏
port/            ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –ø–æ—Ä—Ç–æ–≤ (ProductPort)
repo/            ‚Äî JPA-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
service/         ‚Äî —Å–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω: Hexagonal Architecture (Ports and Adapters)
–ë–î: PostgreSQL –∏–ª–∏ MySQL (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)

‚∏ª

üß© –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
‚Ä¢	Java 17
‚Ä¢	Spring Boot 3.2
‚Ä¢	Spring Data JPA
‚Ä¢	Spring JDBC
‚Ä¢	PostgreSQL / MySQL
‚Ä¢	Prometheus + Grafana
‚Ä¢	Docker / Docker Compose
‚Ä¢	Maven
‚Ä¢	Gatling (Load Testing)

‚∏ª

üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1Ô∏è‚É£ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
‚Ä¢	Java 17+
‚Ä¢	Maven 3.6+
‚Ä¢	PostgreSQL –∏–ª–∏ MySQL
‚Ä¢	Docker –∏ Docker Compose (–¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞)

‚∏ª

2Ô∏è‚É£ –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
1.	–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω:

docker run --name productdb -e POSTGRES_USER=product -e POSTGRES_PASSWORD=productpass -e POSTGRES_DB=productdb -p 5433:5432 -d postgres:14


	2.	–ù–∞—Å—Ç—Ä–æ–π—Ç–µ src/main/resources/application.yml:

spring:
datasource:
url: jdbc:postgresql://localhost:5433/productdb
username: product
password: productpass
jpa:
hibernate:
ddl-auto: update
open-in-view: false

app:
db:
lib: jpa         # jpa –∏–ª–∏ jdbc
seed:
enabled: true
reset: true
target: 200
batch-size: 200


	3.	–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

mvn spring-boot:run

–∏–ª–∏ —á–µ—Ä–µ–∑ IntelliJ IDEA ‚Üí Run ‚Üí ProductMockApplication

	4.	–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:

http://localhost:8080



‚∏ª

3Ô∏è‚É£ –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose

–î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Å—Ç–µ–∫ Prometheus + Grafana:

cd monitoring
docker-compose up -d

–ë—É–¥—É—Ç –∑–∞–ø—É—â–µ–Ω—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:
‚Ä¢	product-mock ‚Äî –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚Ä¢	postgres ‚Äî –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚Ä¢	prometheus ‚Äî —Å–±–æ—Ä—â–∏–∫ –º–µ—Ç—Ä–∏–∫
‚Ä¢	grafana ‚Äî –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

‚∏ª

‚ö° –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É JPA –∏ JDBC

–í application.yml –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –æ–¥–Ω–æ —Å–≤–æ–π—Å—Ç–≤–æ:

app:
db:
lib: jpa     # –∏–ª–∏ jdbc

	‚Ä¢	–î–ª—è JPA ‚Üí spring.jpa.hibernate.ddl-auto: update
	‚Ä¢	–î–ª—è JDBC ‚Üí spring.jpa.hibernate.ddl-auto: none (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è SQL-—Å–∫—Ä–∏–ø—Ç)

‚∏ª

üì¶ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (Seed)

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ.

–ü–∞—Ä–∞–º–µ—Ç—Ä	–û–ø–∏—Å–∞–Ω–∏–µ	–ü—Ä–∏–º–µ—Ä
app.seed.enabled	–í–∫–ª—é—á–∏—Ç—å —Å–∏–¥	true
app.seed.reset	–û—á–∏—Å—Ç–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –ø–µ—Ä–µ–¥ –≤—Å—Ç–∞–≤–∫–æ–π	true
app.seed.target	–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π	200
app.seed.impl	–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏–¥–µ—Ä–∞ (jpa –∏–ª–∏ jdbc)	jdbc

–ü—Ä–∏–º–µ—Ä SQL-—Å—Ö–µ–º—ã (resources/schema-postgresql.sql):

CREATE TABLE IF NOT EXISTS products (
id SERIAL PRIMARY KEY,
name VARCHAR(255) NOT NULL,
category VARCHAR(100) NOT NULL,
price NUMERIC(10,2) NOT NULL CHECK (price >= 0),
stock INTEGER NOT NULL CHECK (stock >= 0)
);


‚∏ª

üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
‚Ä¢	–≠–∫—Å–ø–æ—Ä—Ç –º–µ—Ç—Ä–∏–∫ –≤–∫–ª—é—á—ë–Ω –ø–æ –∞–¥—Ä–µ—Å—É:

http://localhost:8080/actuator/prometheus


	‚Ä¢	Prometheus —Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç –≤ Grafana.
	‚Ä¢	–í Grafana –¥–æ—Å—Ç—É–ø–Ω—ã –¥–∞—à–±–æ—Ä–¥—ã:
	‚Ä¢	JVM (CPU, Heap, GC)
	‚Ä¢	PostgreSQL
	‚Ä¢	Node Exporter (—Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã)

‚∏ª

üß† –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (Gatling)

–ö–∞—Ç–∞–ª–æ–≥: gatling/src/test/java/pref

–°—Ç—Ä—É–∫—Ç—É—Ä–∞:
‚Ä¢	Actions.java ‚Äî HTTP-–∑–∞–ø—Ä–æ—Å—ã
‚Ä¢	Chains.java ‚Äî –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–µ–π—Å—Ç–≤–∏–π
‚Ä¢	Scenarios.java ‚Äî —Å—Ü–µ–Ω–∞—Ä–∏–∏ (GET, POST, PUT, DELETE)
‚Ä¢	ProductSimulation.java ‚Äî –ø–æ–ª–Ω–∞—è —Å–∏–º—É–ª—è—Ü–∏—è —Ç–µ—Å—Ç–∞

–°—Ü–µ–Ω–∞—Ä–∏–∏:

–ù–∞–∑–≤–∞–Ω–∏–µ	Endpoint	–û–ø–∏—Å–∞–Ω–∏–µ
TC01_GET_product_by_id	GET /api/products/{id}	–ß—Ç–µ–Ω–∏–µ
TC02_POST_create_product	POST /api/products	–°–æ–∑–¥–∞–Ω–∏–µ
TC03_PUT_update_product	PUT /api/products/{id}	–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
TC04_DELETE_product	DELETE /api/products/{id}	–£–¥–∞–ª–µ–Ω–∏–µ


‚∏ª

üßÆ –ü—Ä–æ—Ñ–∏–ª—å –Ω–∞–≥—Ä—É–∑–∫–∏

–¢–µ—Å—Ç	RPS	–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —à–∞–≥–∞
Read (GET)	50	1 –º–∏–Ω—É—Ç–∞
Update (PUT)	10	1 –º–∏–Ω—É—Ç–∞
Create (POST)	5	1 –º–∏–Ω—É—Ç–∞
Delete (DELETE)	2.5	1 –º–∏–Ω—É—Ç–∞

–ù–∞–≥—Ä—É–∑–∫–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –ø–æ —Å—Ç—É–ø–µ–Ω—è–º, —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è 95-–π –∏ 99-–π –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª–∏ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–ª–∏–∫–∞.

‚∏ª

üßæ –ü—Ä–∏–º–µ—Ä API-–∑–∞–ø—Ä–æ—Å–æ–≤

–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞

curl -X POST http://localhost:8080/api/products \
-H "Content-Type: application/json" \
-d '{"name": "Item-001", "category": "LoadTest", "price": 12.50, "stock": 100}'

–ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞

curl http://localhost:8080/api/products/1

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞

curl -X PUT http://localhost:8080/api/products/1 \
-H "Content-Type: application/json" \
-d '{"name": "Item-001-Updated", "category": "Test", "price": 15.00, "stock": 80}'

–£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞

curl -X DELETE http://localhost:8080/api/products/1


‚∏ª

üß∞ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

product-mock/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main/java/com/example/product_mock/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ adapter/           # JPA –∏ JDBC –∞–¥–∞–ø—Ç–µ—Ä—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/            # SeedConfig –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controller/        # REST –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ model/             # –°—É—â–Ω–æ—Å—Ç—å Product
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ port/              # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å ProductPort
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ repo/              # JPA —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ service/           # –õ–æ–≥–∏–∫–∞ —Å–µ—Ä–≤–∏—Å–∞
‚îÇ   ‚îî‚îÄ‚îÄ resources/
‚îÇ       ‚îú‚îÄ‚îÄ schema-postgresql.sql
‚îÇ       ‚îî‚îÄ‚îÄ application.yml
‚îÇ
‚îú‚îÄ‚îÄ gatling/
‚îÇ   ‚îî‚îÄ‚îÄ src/test/java/pref/    # Gatling-—Å—Ü–µ–Ω–∞—Ä–∏–∏
‚îÇ
‚îú‚îÄ‚îÄ monitoring/
‚îÇ   ‚îú‚îÄ‚îÄ prometheus.yml
‚îÇ   ‚îú‚îÄ‚îÄ docker-compose.yml
‚îÇ   ‚îî‚îÄ‚îÄ pgdata/
‚îÇ
‚îú‚îÄ‚îÄ pom.xml
‚îî‚îÄ‚îÄ README.md


‚∏ª

üß™ –°–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

mvn clean package
mvn test


‚∏ª

üß≠ –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞

–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤–ª–∏—è–Ω–∏—è –≤—ã–±–æ—Ä–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º (JPA vs JDBC) –∏ —Ç–∏–ø–∞ –°–£–ë–î –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–µ.
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ —Å—Ç–µ–Ω–¥ –¥–ª—è –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∞–Ω–∞–ª–∏–∑–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º –ø–æ–¥ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π.

‚∏ª

ü™™ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –≤ —Ä–∞–º–∫–∞—Ö —É—á–µ–±–Ω–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –ø–æ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é.
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π.